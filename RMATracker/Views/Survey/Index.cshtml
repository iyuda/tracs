@model RMATracker.Models.SurveyModel
@{
    ViewBag.QueryMode = (ViewBag.QueryMode ?? false);
    //    ViewBag.Title = "Home Page";
    string is_required = ViewBag.QueryMode ? "" : "*(required)";

}

<div class="container">
    <div class="row">
        <div class="row">

            <div class="col-xs-12 col-sm-8">
                <div id="content" role="main">
                    <article role="article" id="post_2320" class="post-2320 page type-page status-publish hentry">
                        <div role="form" class="wpcf7" id="wpcf7-f2319-p2320-o1" dir="ltr" lang="en-US">
                            <div class="screen-reader-response"></div>
                            <form id="formSurvey" action="~/Survey/SaveSurveyData" method="post" class="wpcf7-form" enctype="multipart/form-data" novalidate="novalidate" runat="server">
                                @Html.HiddenFor(m => m.Survey.id, new { @id = "survey_id" })
                                <div style="display: none;">
                                    <input name="_wpcf7" value="2319" type="hidden">
                                    <input name="_wpcf7_version" value="5.0.3" type="hidden">
                                    <input name="_wpcf7_locale" value="en_US" type="hidden">
                                    <input name="_wpcf7_unit_tag" value="wpcf7-f2319-p2320-o1" type="hidden">
                                    <input name="_wpcf7_container_post" value="2320" type="hidden">
                                </div>
                                <div class="container1">
                                    @*@{Html.RenderPartial("~/Views/Shared/DropImageView.cshtml");}*@
                                    <div class="section1">
                                        @{var weight = ViewBag.QueryMode ? "normal" : "bold";}
                                        <label style="font-weight:@weight">Date:<span class="required">@is_required</span></label>
                                        @* <div class="form-group survey-date">*@
                                        @*<input class="wpcf7-form-control wpcf7-date wpcf7-validates-as-date form-control" name="survey-date" value="" min="" max="" step="" aria-invalid="false" type="date">*@
                                        @{
                                            var SurveyDate = (Model.Survey?.survey_date == null ? "" : DateTime.Parse(Model.Survey.survey_date).ToString("yyyy-MM-dd"));
                                        }
                                        @*@Html.TextBoxFor(m => m.Survey.survey_date, new { @Value = @SurveyDate, @type = "date", @min = "", @max = "", @step = "", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-date wpcf7-validates-as-date form-control" })*@
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                                                { "PropertyName", "survey_date" },
                                                                                                                                                                { "Attributes", new { @Value = @SurveyDate, @type = "date", @min = "", @max = "", @step = "", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-date wpcf7-validates-as-date form-control" } },
                                                                                                                                                                { "divClass", "form-group survey-date" },
                                                                                                                                                                }); }
                                        @*</div>*@
                                    </div>
                                    <div class="section1">
                                        @{weight = ViewBag.QueryMode ? "normal" : "bold";}
                                        <label style="font-weight:@weight">Tech Name:<span class="required">@is_required</span></label>
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                                                { "PropertyName", "tech_name" },
                                                                                                                                                                { "Attributes", new { @placeholder = "Tech Name (required)", @maxlength = "50", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" } },
                                                                                                                                                                { "divClass", "form-group tech-name" },
                                                                                                                                                                }); }
                                    </div>
                                    <div class="section1">
                                        @{ weight = ViewBag.QueryMode ? "normal" : "bold";}
                                        <label style="font-weight:@weight">Requestor:<span class="required">@is_required</span></label>
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                                                { "PropertyName", "requestor" },
                                                                                                                                                                { "Attributes", new { @placeholder = "Client Dispatch Service Requestor", @maxlength = "50", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" } },
                                                                                                                                                                { "divClass", "form-group survey-reporter" },
                                                                                                                                                                }); }
                                    </div>
                                </div>

                                <div class="container1">
                                    <div class="section1">
                                        @*<input class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" name="client-city" value="" placeholder="City (required)" aria-invalid="false" aria-required="true" required="" type="text">*@
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                                                { "PropertyName", "City" },
                                                                                                                                                                { "Attributes",new { @placeholder = "City (required)", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" } },
                                                                                                                                                                { "divClass", "form-group client-city" },
                                                                                                                                                                { "ShowLabel", true },
                                                                                                                                                                }); }
                                    </div>

                                    <div class="section1">
                                        <div class="form-group client-state">
                                            @*<input class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" name="client-state" value="" placeholder="State (required)" aria-invalid="false" aria-required="true" required="" type="text">*@
                                            @{var States = Utilities.GetStates();}
                                            @if (!ViewBag.QueryMode)
                                            {

                                                ViewBag.DropDownList = new SelectList(Utilities.GetStates(), "Value", "Text", Model.Survey == null ? null : Model.Survey.State);
                                                ViewBag.DropDownTextAlign = "left";
                                                ViewBag.DropDownListID = "Survey_State";
                                                ViewBag.DropDownListName = "Survey.State";
                                                ViewBag.DropDownWidth = 200;

                                                @RenderPage("~/Views/Shared/AutoComplete.cshtml")
                                                @*@Html.DropDownListFor(m => m.Survey.State, new SelectList(States, "Value", "Text", Model.Survey?.State), "-- Select State --", new
                                                       {
                                                           @placeholder = "State (required)",
                                                           @aria_invalid = "false",
                                                           @aria_required = "true",
                                                           @required = "",
                                                           @class = "wpcf7-form-control wpcf7-select wpcf7-validates-as-required form-control",
                                                           @onchange = "GetSurveyStateName(this)"
                                                       })*@
                                            }
                                            else
                                            {
                                                <label style="width:7ch;font-weight:normal">State:</label>
                                                @Html.LabelFor(m => m.Survey._SurveyStateFullName, Model.Survey.State == null ? "" : States.FirstOrDefault(s => s.Value == Model.Survey.State).Text, new { @style = "font-weight:bold" });
                                                @Html.HiddenFor(m => m.Survey.State)
                                            }
                                            @Html.HiddenFor(m => m.Survey._SurveyStateFullName)
                                        </div>
                                    </div>
                                    <div class="section1">
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                                                { "PropertyName", "ZipCode" },
                                                                                                                                                                { "Attributes",new { @pattern = "[0-9]{5}|[0-9]{9}", @placeholder = "Zip (required)", @maxlength = "9", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" } },
                                                                                                                                                                { "divClass", "form-group client-zip" },
                                                                                                                                                                { "ShowLabel", true },
                                                                                                                                                                }); }
                                    </div>
                                    @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                            { "ClassName", "Survey" },
                                                                                                                                                            { "PropertyName", "requester_problem" },
                                                                                                                                                            { "Attributes", new { @placeholder = "Problem Reported by Service Requester", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                                            { "divClass", "form-group survey-comments22" },
                                                                                                                                                            { "ShowLabel", true },
                                                                                                                                                            { "TextArea", true },
                                                                                                                                                            }); }

                                </div>
                                @if (!ViewBag.QueryMode)
                                {
                                    @:Upon Arrival to the Location, inquire who requested the service call at the branch and record the following:
                                }
                                <br>
                                <div class="container1" style="width:100%">
                                    <div class="section1" style="width:40%">
                                        @*<input class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" name="survey-reporter" value="" placeholder="Who Reported the Problem? (required)" aria-invalid="false" aria-required="true" required="" type="text">*@
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                                                { "PropertyName", "problem_reporter" },
                                                                                                                                                                { "Attributes", new { @placeholder = "Who Reported the Problem (required)", @maxlength = "9", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" } },
                                                                                                                                                                { "divClass", "form-group survey-reporter" },
                                                                                                                                                                { "ShowLabel", true },
                                                                                                                                                                { "LabelForReadOnly", "Problem Reported By" },
                                                                                                                                                                }); }
                                        @*  @Html.TextBoxFor(m => m.Survey.problem_reporter, new { @placeholder = "Who Reported the Problem (required)", @maxlength = "9", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" })*@
                                    </div>
                                    <div class="section1" style="width:60%">
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                                                { "PropertyName", "phone" },
                                                                                                                                                                { "Attributes", new { @placeholder = "Phone (required)", @pattern = "[789][0-9]{9}",  @maxlength = "15", @type = "tel", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-text wpcf7-validates-as-required form-control" } },
                                                                                                                                                                { "divClass", "form-group survey-reporterphone" },
                                                                                                                                                                { "ShowLabel", true },
                                                                                                                                                                }); }

                                    </div>
                                    @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                        { "ClassName", "Survey" },
                                                                                                                                                        { "PropertyName", "requester_problem" },
                                                                                                                                                        { "Attributes", new { @placeholder = "Problem Reported by Site Contact", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                                        { "divClass", "form-group survey-siteproblem" },
                                                                                                                                                        { "ShowLabel", true },
                                                                                                                                                        { "TextArea", true },
                                                                                                                                                        }); }


                                    @if (!ViewBag.QueryMode)
                                    {
                                        @Html.Raw("If Branch personnel did not make the request, record above \"Branch Personnel Did Not Request Service\"");
                                    }
                                </div><br>


                                      <fieldset>
                                          <legend>Site Inspection</legend>
                                          @Html.HiddenFor(m => m.SurveySiteInspection.id)
                                          @{ for (int i = 1; i <= 2; i++)
                                              {
                                                  <div class="container1" style="border-bottom:dashed;border-bottom-width:thin">
                                                      <div class="section1">
                                                          @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                  { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                                  { "PropertyName", "reader"+i+"_serial" },
                                                                                                                                                                                                  { "Attributes", new { @placeholder = "Reader #"+i+ " S/N (required)", @maxlength = "6", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" } },
                                                                                                                                                                                                  { "divClass", "form-group survey-reader_sn_"+i },
                                                                                                                                                                                                  { "ShowLabel", true },
                                                                                                                                                                                                  }); }
                                                      </div>
                                                      <div class="section1">
                                                          @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                              { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                              { "PropertyName", "reader"+i+"_image_description" },
                                                                                                                                                                                              { "Attributes", new { @maxlength = "100", @placeholder = "Reader #"+i+" Picture (required)", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" } },
                                                                                                                                                                                              { "divClass", "form-group survey-reader_image_"+i },
                                                                                                                                                                                              { "ShowLabel", true },
                                                                                                                                                                                              }); }

                                                      </div>
                                                      @*@Html.TextBoxFor(m => Model.ImagePathsMap[i-1])*@

                                                      @{Html.RenderPartial("~/Views/Shared/ImageView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                      { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                      { "PropertyName", "reader"+i+"_image_path" },
                                                                                                                                                                                      { "ImageIndex", i }
                                                                                                                                                                                      }); }

                                                  </div>
                                              }
                                          }
                                          <div class="container1" style="border-bottom:dashed;border-bottom-width:thin">
                                              <div class="section1">
                                                  @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                            { "ClassName", "SurveySiteInspection" },
                                                                                                            { "PropertyName", "controller_serial" },
                                                                                                            { "Attributes", new { @placeholder = "Controller S/N (required)", @maxlength = "6", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" } },
                                                                                                            { "divClass", "form-group survey-controller_sn"},
                                                                                                            { "ShowLabel", true },
                                                                                                                                                                                                                                                                                                                                      }); }
                                              </div>
                                              <div class="section1">
                                                  @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                    { "ClassName", "SurveySiteInspection" },
                                                                                                                                    { "PropertyName", "controller_image_description" },
                                                                                                                                    { "Attributes", new { @maxlength = "100", @placeholder = "Controller Picture (required)", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" } },
                                                                                                                                    { "divClass", "form-group survey-controller_image"},
                                                                                                                                    { "ShowLabel", true },
                                                                                                                                    }); }

                                              </div>
                                              
                                              @{Html.RenderPartial("~/Views/Shared/ImageView.cshtml", Model, new ViewDataDictionary {
                                                                                                            { "QueryMode", ViewBag.QueryMode },
                                                                                                            { "ClassName", "SurveySiteInspection" },
                                                                                                            { "PropertyName", "controller_image_path" },
                                                                                                            { "ImageIndex", 3 }
                                                                                                            }); }

                                          </div>


                                          <div class="container1">
                                          <div class="container1">
                                              <div class="section1">
                                                  @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                            { "QueryMode", ViewBag.QueryMode },
                                                                                                            { "ClassName", "SurveySiteInspection" },
                                                                                                            { "PropertyName", "existing_firm_version" },
                                                                                                            { "Attributes", new { @placeholder = "Existing Firmware Version (required)", @maxlength = "10", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" } },
                                                                                                            { "divClass", "form-group survey-existing_firmware"},
                                                                                                            { "ShowLabel", true },
                                                                                                            }); }

                                              </div>
                                              <div class="section1">
                                                  @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                        { "QueryMode", ViewBag.QueryMode },
                                                                                                        { "ClassName", "SurveySiteInspection" },
                                                                                                        { "PropertyName", "new_firm_version" },
                                                                                                        { "Attributes", new { @placeholder = "New Firmware Version (required)", @maxlength = "10", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" } },
                                                                                                        { "divClass", "form-group survey-new_firmware"},
                                                                                                        { "ShowLabel", true },
                                                                                                        }); }

                                              </div>
                                          </div>

                                          <div class="container1">
                                              @*<label>UPS Present:<span class="required">@is_required</span></label>*@
                                              
                                              @{Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                  { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                  { "PropertyName", "ups_present" },
                                                                                                                                                                  { "divClass", "form-group UPS-present" },
                                                                                                                                                                  { "Label", "UPS Present:"+@is_required },
                                                                                                                                                                }); }
                                              @{Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                  { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                  { "PropertyName", "ups_installed" },
                                                                                                                                                                  { "divClass", "form-group UPS-install" },
                                                                                                                                                                  { "Label", "Installed if not present:"+@is_required },
                                                                                                                                                              }); }
                                          </div>


                                          <div class="container1">
                                              <div class="section1">
                                                  @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                                                                                                                                                                                                    { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                                                                                                                                                                                                                                                                    { "PropertyName", "card_reader_wiring" },
                                                                                                                                                                                                                                                                                                                                                                                                                                    { "Attributes", new { @placeholder = "Card Reader Wiring (required)", @maxlength = "20", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                                                                                                                                                                                                                                                                                                                                                    { "divClass", "form-group card-reader-wiring" },
                                                                                                                                                                                                                                                                                                                                                                                                                                    { "Showlabel", true},
                                                                                                                                                                                                                                                                                                                                                                                                                                    }); }

                                              </div>
                                              <div class="section1">
                                                  @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                            { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                                                                                            { "PropertyName", "card_reader_wiring_image_desc" },
                                                                                                                                                                                                                                                            { "Attributes", new { @maxlength = "100", @placeholder = "Card Reader Wiring Picture (required)", @aria_invalid = "false", @aria_required = "true", @required = "", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                                                                                                                                                                            { "divClass", "form-group card-reader-wiring-image" },
                                                                                                                                                                                                                                                            { "Showlabel", true},
                                                                                                                                                                                                                                                            }); }
                                              </div>


                                              @*<div class="container1">*@
                                              @*@Html.TextBoxFor(m => Model.ImagePathsMap[3])*@
                                              @{Html.RenderPartial("~/Views/Shared/ImageView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                            { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                                                                            { "PropertyName", "card_reader_wiring_image_path" },
                                                                                                                                                                                                                                            { "ImageIndex", 4 }
                                                                                                                                                                                                                                            }); }
                                              @*</div>*@

                                          </div>
                                          @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                                                                { "PropertyName", "physical_int_devices" },
                                                                                                                                                                                                                                { "Attributes", new { @placeholder = "Physical Interference Devices (i.e.; Door Handle, Storefront, etc.)", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                                                                                                                { "divClass", "form-group survey-physical-device" },
                                                                                                                                                                                                                                { "ShowLabel", true },
                                                                                                                                                                                                                                { "TextArea", true },
                                                                                                                                                                                                                                }); }
                                          @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                                                                { "PropertyName", "elecrtrical_int_devices" },
                                                                                                                                                                                                                                { "Attributes", new { @placeholder = "Electrical Interference Devices (i.e.; Power Supply PCB mounted in ACS-1E panel, etc.)", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                                                                                                                { "divClass", "form-group survey-electrical-device" },
                                                                                                                                                                                                                                { "ShowLabel", true },
                                                                                                                                                                                                                                { "TextArea", true },
                                                                                                                                                                                                                                }); }


                                          @Html.Raw("Is a power supply PCB for the ACS-1E Panel or the Door Lock / Exit Hardware mounted within the ACS - 1E Panel ?")

                                          @*<div class="form-group wpcf7-form-control wpcf7-radio powersupply-ACA-1E"><div class="radio"><label><input name="powersupply-ACA-1E" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="powersupply-ACA-1E" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@

                                          @{
                                              Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                                                                { "PropertyName", "is_mounted" }
                                                                                                                                                                                                                                }); }
                                          @if (!ViewBag.QueryMode)
                                          {
                                              @Html.Raw("If yes, take a picture and remove and/or replace the power supply and mount the new power supply outside the enclosure of the ACS-1E panel and reconnect door/lock exit hardware to the new power supply and wire power series to the appropriate 1st or 2nd ACS-1E Card Reader Door Relay.  If you don’t have the proper power supply in your inventory, indicate: <br>&nbsp;")
                                          }
                                          @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                            { "ClassName", "SurveySiteInspection" },
                                                                                                                                                                                                                            { "PropertyName", "supply_needed" },
                                                                                                                                                                                                                            { "Attributes", new { @maxlength = "50", @placeholder = "Type of power supply needed", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-text form-control" }},
                                                                                                                                                                                                                            { "divClass", "form-group powersupplyneeded" },
                                                                                                                                                                                                                            { "ShowLabel", true },
                                                                                                                                                                                                                            }); }


                                          @if (!ViewBag.QueryMode)
                                          {
                                              @Html.Raw("Note: Attach all pictures of the equipment, panel and surrounding wires to Service Call Management System.")
                                          }

                                      </fieldset> <br>&nbsp;
                                @for (int i = 0; i < 2; i++)
                                {
                                    @Html.HiddenFor(m => m.SurveyReaderArrivalStates[i].id)
                                    <fieldset>
                                        <legend>Card Reader # @(i + 1) State upon Arrival:</legend>
                                        @if (!ViewBag.QueryMode)
                                        {
                                            @Html.Raw("<strong>LED Status</strong> (all required)")
                                        }
                                        else
                                        {
                                            @Html.Raw("<strong>LED Status:</strong><br><br>")
                                        }
                                        @{ foreach (string category in "Green|Amber|Red|Blinking Red".Split('|'))
                                            {



                                                @:<div class="container1">
                                                    Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                            { "ClassName", "SurveyReaderArrivalStates" },
                                                                                                                                            { "Index", i },
                                                                                                                                            { "PropertyName", "reader_"+category.ToLower().Replace(" ", "_") },
                                                                                                                                            { "divClass", "form-group card1-"+category},
                                                                                                                                            { "Label", category},
                                                                                                                                        });

                                                    Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                            { "ClassName", "SurveyReaderArrivalStates" },
                                                                                                                                            { "Index", i },
                                                                                                                                            { "PropertyName", "reader_"+category.ToLower().Replace(" ", "_")+"_schedule" },
                                                                                                                                            { "divClass", "form-group card1-"+category+"_pre"},
                                                                                                                                            { "Label", "Programmed Access Schedule"},
                                                                                                                                        });

                                                @:</div>
                                            }
                                        }

                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                            { "QueryMode", ViewBag.QueryMode },
                                                                                                                            { "ClassName", "SurveyReaderArrivalStates" },
                                                                                                                            { "PropertyName", "reader_other" },
                                                                                                                            { "Attributes", new { @placeholder = "Other", @maxlength = "20", @aria_invalid = "false", @class = "wpcf7-form-control form-control" }},
                                                                                                                            { "divClass", "form-group card1-other" },
                                                                                                                            { "Index", i },
                                                                                                                            { "ShowLabel", true }
                                                                                                                            }); }

                                        <strong>Card Reader # @(i + 1) Read Tests:</strong><br>
                                        Magnetic Stripe Card Read Successful ?

                                        <div class="form-group wpcf7-form-control wpcf7-radio card1-magnetic">
                                            @*<label><input name="card1-magnetic" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label>*@
                                            @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode
                                                                                                                                    },
                                                                                                                                    { "ClassName", "SurveyReaderArrivalStates" },
                                                                                                                                    { "Index", i },
                                                                                                                                    { "PropertyName", "reader_success1" }
                                                                                                                                    }); }
                                        </div>

                                        Contactless EMV Card or NFC Enabled Mobile Phone Read Successful?
                                        <div class="form-group wpcf7-form-control wpcf7-radio card1-EMV-NFC">
                                            @*<label><input name="card1-EMV-NFC" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label>*@
                                            @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                    { "ClassName", "SurveyReaderArrivalStates" },
                                                                                                                                    { "Index", i },
                                                                                                                                    { "PropertyName", "reader_success2" }
                                                                                                                                }); }
                                        </div>
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                { "ClassName", "SurveyReaderArrivalStates" },
                                                                                                                                { "PropertyName", "reader_notes" },
                                                                                                                                { "Attributes", new { @placeholder = "Notes", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                { "divClass", "form-group card1-notes" },
                                                                                                                                { "ShowLabel", true },
                                                                                                                                { "TextArea", true },
                                                                                                                                { "Index", i },
                                                                                                                                }); }


                                    </fieldset>
                                }

                                <fieldset>
                                    <legend>ACS-1E Panel State upon Arrival:</legend>
                                </fieldset>


                                @if (!ViewBag.QueryMode)
                                {
                                    @Html.Raw("<strong>Heart Beat LED State</strong> (all required)")
                                }
                                else
                                {
                                    @Html.Raw("<strong>Heart Beat LED States:</strong><br><br>")
                                }
                                @foreach (string category in "Main|RS485".Split('|'))
                                {
                                    <div class="container1">
                                        @*    <select class="wpcf7-form-control wpcf7-select wpcf7-validates-as-required form-control" name="ACS-1E-Alarm-LED-Relay1" aria-invalid="false" aria-required="true" required=""><option value="" selected="">---</option><option value="Red">Red</option><option value="Off">Off</option></select>*@

                                        @{Html.RenderPartial("~/Views/Shared/DropDownView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                { "PropertyName", "heartbeat_"+category.ToLower() },
                                                                                                                                { "selectList", Utilities.GetHeartBeatStates() },
                                                                                                                                { "divClass", "form-group ACS-1E-Heartbeat-"+category},
                                                                                                                                { "Label", category},
                                                                                                                            }); }

                                        <div class="section1">
                                            @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                    { "QueryMode", ViewBag.QueryMode },
                                                                                                                    { "ClassName", "Survey" },
                                                                                                                    { "PropertyName", "heartbeat_"+category.ToLower() +"_other" },
                                                                                                                    { "Attributes", new { @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control form-control" }},
                                                                                                                    { "divClass", "form-group ACS-1E-Heartbeat-"+category+"-Other" },
                                                                                                                    { "LabelForEdit", "Other" },
                                                                                                                    { "LabelForReadOnly", "Other" },
                                                                                                                    { "ShowLabel", true }
                                                                                                                    }); }
                                        </div>

                                    </div>
                                }

                                @if (!ViewBag.QueryMode)
                                {
                                    @Html.Raw("<strong>Alarm LED’s State</strong> (all required)")
                                }
                                else
                                {
                                    @Html.Raw("<strong>Alarm LED’s States:</strong><br><br>")
                                }
                                @foreach (string category in "Tamper|Overlay|Cable Cut".Split('|'))
                                {
                                    <div class="container1">
                                        @*    <select class="wpcf7-form-control wpcf7-select wpcf7-validates-as-required form-control" name="ACS-1E-Alarm-LED-Relay1" aria-invalid="false" aria-required="true" required=""><option value="" selected="">---</option><option value="Red">Red</option><option value="Off">Off</option></select>*@
                                        @{Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                    { "ClassName", "Survey" },
                                                                                                                                    { "PropertyName", "alarm_"+category.ToLower().Replace(" ", "_") },
                                                                                                                                    { "FirstValue", "Red" },
                                                                                                                                    { "SecondValue", "Off" },
                                                                                                                                    { "divClass", "form-group ACS-1E-Alarm-LED-"+category},
                                                                                                                                    { "Label", category},
                                                                                                                                }); }

                                        <div class="section1">
                                            @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                                            { "QueryMode", ViewBag.QueryMode },
                                                                                                                                            { "ClassName", "Survey" },
                                                                                                                                            { "PropertyName", "alarm_"+category.ToLower().Replace(" ", "_") +"_other" },
                                                                                                                                            { "Attributes", new { @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control form-control" }},
                                                                                                                                            { "divClass", "form-group ACS-1E-Alarm-LED-"+category+"-Other" },
                                                                                                                                            { "LabelForEdit", "Other" },
                                                                                                                                            { "LabelForReadOnly", "Other" },
                                                                                                                                            { "ShowLabel", true }
                                                                                                                                            }); }

                                        </div>

                                    </div>
                                }
                                @if (!ViewBag.QueryMode)
                                {
                                    @Html.Raw("<strong>Relay LED State</strong> (all required)")
                                }
                                else
                                {
                                    @Html.Raw("<strong>Relay LED States:</strong><br><br>")
                                }
                                @for (int i = 1; i <= 3; i++)
                                {
                                    <div class="container1">
                                        @*    <select class="wpcf7-form-control wpcf7-select wpcf7-validates-as-required form-control" name="ACS-1E-Alarm-LED-Relay1" aria-invalid="false" aria-required="true" required=""><option value="" selected="">---</option><option value="Red">Red</option><option value="Off">Off</option></select>*@
                                        @{Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                    { "ClassName", "Survey" },
                                                                                                                                    { "PropertyName", "alarm_relay"+i },
                                                                                                                                    { "FirstValue", "Red" },
                                                                                                                                    { "SecondValue", "Off" },
                                                                                                                                    { "divClass", "form-group ACS-1E-Alarm-LED-Relay"+i },
                                                                                                                                    { "Label", "Relay "+i },
                                                                                                                                }); }

                                        <div class="section1">
                                            @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                                            { "QueryMode", ViewBag.QueryMode },
                                                                                                                                            { "ClassName", "Survey" },
                                                                                                                                            { "PropertyName", "alarm_relay"+i+"_other" },
                                                                                                                                            { "Attributes", new { @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control form-control" }},
                                                                                                                                            { "divClass", "form-group ACS-1E-Alarm-LED-Relay"+i+"-Other" },
                                                                                                                                            { "LabelForEdit", "Other" },
                                                                                                                                            { "LabelForReadOnly", "Other" },
                                                                                                                                            { "ShowLabel", true }
                                                                                                                                            }); }

                                        </div>

                                    </div>
                                }


                                @if (!ViewBag.QueryMode)
                                {
                                    <html>
                                    Take pictures and a short video(use low resolution for fast upload to Service Call Management System and / or via Email) for any abnormal situation(s) observed.Add a description to the notes of the Service Call Management System of the observation shown in your picture(s) or video(s).
                                    <br> &nbsp;

                                    <p><strong>Remote Connection Check with ACS Enterprise Client Contact and Card Data/Event Data Upload:</strong> </p>
                                    <ul>
                                        <li>Have Client Programming Dept.remote connect to the ACS-1E panel before touching the ACS-1E system to verify connectivity.  </li>
                                        <li>Request that they upload the Card Data and the Panel Event files before you touch the ACS-1E system.  </li>
                                    </ul>
                                </html>
                            }
                            @*<div class="form-group wpcf7-form-control wpcf7-radio ACS-1E-Remote_Upload"><div class="radio"><label><input name="ACS-1E-Remote_Upload" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="ACS-1E-Remote_Upload" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                @{
                                    Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                    { "ClassName", "Survey" },
                                                                                                                                                    { "PropertyName", "client_able_connect" },
                                                                                                                                                    { "Label", "Was Client able to Remote Connect and upload these two Audit Trial Files?" }
                                                                                                                                                });
                                }
                                @if (!ViewBag.QueryMode)
                                {
                                    <html>
                                    If no, tech needs to connect to the ACS-1E system and upload these two Audit Trail Files and attach these files to the Service Call Management System.
                                    <br> &nbsp;
                                </html>
                            }
                                <p><strong>Client does not have Remote Connectivity to the ACS-1E Panel</strong></p>
                                @if (!ViewBag.QueryMode)
                                {
                                    <html>
                                    <ol>
                                        <li>
                                            Connect Direct to the panel using serial cable
                                        </li>
                                        <li>
                                            Retrieve IP Configurations and print the screen.  Completed:
                                            @*<div class="form-group wpcf7-form-control wpcf7-radio ACS-1E-Remote-Connectivity-IP"><div class="radio"><label><input name="ACS-1E-Remote-Connectivity-IP" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="ACS-1E-Remote-Connectivity-IP" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                            @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                            { "ClassName", "Survey" },
                                                                                                                                                                            { "PropertyName", "retrieve_ip_completed" }
                                                                                                                                                                        }); }
                                        </li>
                                        <li>
                                            Setup the personal laptop to Remote Connect to the panel using crossover network cable
                                        </li>
                                        <li>
                                            Remote Connect to the ACS-1E panel:
                                        </li>
                                        <li>
                                            Upload the ACS-1E Panel Event and Card Data Audit Trail Files:
                                            <ul>
                                                <li>Name the Card Data Audit Trail file: Bank Name, Card Data, Branch Address, City, Date and Time.i.e.; Client Name Card Data 100 Main St.Bethpage 020817 2107.</li>

                                                <div class="form-group ACS-1E-Remote-Connectivity">
                                                    @*    <input class="wpcf7-form-control wpcf7-text form-control" name="ACS-1E-Remote-Connectivity" value="" placeholder="Record Name of File Saved" aria-invalid="false" type="text">*@
                                                    @Html.TextBoxFor(m => m.Survey.trail_file_name1, new { @placeholder = "Record Name of File Saved", @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" })
                                                </div>

                                                <li>Name the ACS-1E Panel Event Audit Trail file: Bank Name, Event Data, Branch Address, City, Date and Time.i.e.; Client Name Event Data 100 Main St.Bethpage 020817 2107. </li>

                                                <div class="form-group ACS-1E-Panel-Audit-Trail">
                                                    @*<input class="wpcf7-form-control wpcf7-text form-control" name="ACS-1E-Panel-Audit-Trail" value="" placeholder="Record Name of File Saved" aria-invalid="false" type="text">*@
                                                    @Html.TextBoxFor(m => m.Survey.trail_file_name2, new { @placeholder = "Record Name of File Saved", @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" })
                                                </div>

                                                <li>Attach the Audit Trail Files to the Service Call Management System</li>
                                            </ul>

                                        </li>
                                        <li>Take a screenshot of the Card Reader and Sensor settings and attach to the Service Call Management System. </li>
                                        <li>Call Client to resolve the network connectivity issue.  </li>

                                        <div class="form-group ACS-Network-Comtact">
                                            @*<input class="wpcf7-form-control wpcf7-text form-control" name="ACS-Network-Comtact" value="" placeholder="Client ACS Enterprise/Network Contact" aria-invalid="false" type="text">*@
                                            @Html.TextBoxFor(m => m.Survey.client_contact, new { @placeholder = "Client ACS Enterprise/Network Contact", @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" })
                                        </div>

                                    </ol>
                                </html>
                            }
                            else
                            {
                                Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                                        { "QueryMode", ViewBag.QueryMode },
                                                                                                                                        { "ClassName", "Survey" },
                                                                                                                                        { "PropertyName", "trail_file_name1" },
                                                                                                                                        { "Attributes", new { @placeholder = "Record Name of File Saved", @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                                                        { "divClass", "form-group ACS-1E-Remote-Connectivity" },
                                                                                                                                        { "LabelForReadOnly", "Retrieve IP Configurations and print the screen. Completed" },
                                                                                                                                        { "ShowLabel", true }
                                                                                                                                        });
                                Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                                        { "QueryMode", ViewBag.QueryMode },
                                                                                                                                        { "ClassName", "Survey" },
                                                                                                                                        { "PropertyName", "trail_file_name2" },
                                                                                                                                        { "Attributes", new { @placeholder = "Record Name of File Saved", @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                                                        { "divClass", "form-group ACS-1E-Panel-Audit-Trail" },
                                                                                                                                        { "LabelForReadOnly", "Record Name of CS 1E Panel IP Configurations File Saved" },
                                                                                                                                        { "ShowLabel", true }
                                                                                                                                        });
                                Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                                        { "QueryMode", ViewBag.QueryMode },
                                                                                                                                        { "ClassName", "Survey" },
                                                                                                                                        { "PropertyName", "client_contact" },
                                                                                                                                        { "Attributes", new { @placeholder = "Client ACS Enterprise/Network Contact", @maxlength = "50", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                                                        { "divClass", "form-group ACS-Network-Comtact" },
                                                                                                                                        { "ShowLabel", true }
                                                                                                                                        });
                            }

                                <p><strong>Troubleshooting</strong></p>

                                @if (!ViewBag.QueryMode)
                                {
                                    <html>
                                    <strong>Cable Integrity Inspection/Review and Cable Cut Alarms</strong>

                                    Check along Card Reader communication cable route and look for any source of Electric and Magnetic Fields(EMF)

                                    (Invisible areas of energy, often referred to as radiation that are associated with the use of electrical power and various forms of natural and man - made lighting, transformer, fans, motor, HVAC systems, etc.).If you find the Card Reader cable to be located within 12 inches of any EMF, relocate the cable as far away as possible from the EMF source(s).If relocating the cable is not possible, then recommend installing a new Card Reader cable via an alternate route away from any existing EMF.
                                    <br> &nbsp;
                                </html>
                            }
                                <ul>
                                    @for (int i = 0; i <= 7; i++)
                                    {
                                        @Html.HiddenFor(m => m.SurveyIntegrityChecks[i].id)
                                        <li>
                                            @*Check/Tighten ACS-1E Panel screw terminals for the card reader cable(s). Checked:*@
                                            @if (!ViewBag.QueryMode || i < 7)
                                            {
                                                @Model.SurveyIntegrityChecks[i]._message
                                            }

                                            @*    <div class="form-group wpcf7-form-control wpcf7-radio ACS-1E-Screw-Terminals"><div class="radio"><label><input name="ACS-1E-Screw-Terminals" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="ACS-1E-Screw-Terminals" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                            @{ if (i < 7)
                                                {
                                                    Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                            { "ClassName", "SurveyIntegrityChecks" },
                                                                                                                                            { "PropertyName", "integrity_check" },
                                                                                                                                            { "Index", i }
                                                                                                                                        });
                                                }
                                            }
                                            @{
                                                switch (i)
                                                {
                                                    case 5:
                                                        <div class="container1">
                                                            @{Html.RenderPartial("~/Views/Shared/ImageView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                      { "ClassName", "Survey" },
                                                                                                                                                                                                                                      { "PropertyName", "integrity_check6_image_path" },
                                                                                                                                                                                                                                      { "ImageIndex", 5 }
                                                                                                                                                                                                                                      }); }

                                                        </div>
                                                        break;
                                                    case 6:
                                                        <ul>
                                                            <li>If yes, then most likely the cable doesn’t have a splice.If no, then there is a splice in the cable.  If there is a splice in the cable and the resistance of the Cable is greater than 9 Ohms, then the Cable will require replacement.<br>&nbsp;</li>
                                                        </ul>
                                                        break;
                                                    case 7:
                                                        <ul>
                                                            <li>What is the Resistance measurement for each pair of the Card Reader Cables? Cable resistance is measured by tying 2 wires at one end and measuring the tied pair at the other end.<br>&nbsp; </li>
                                                        </ul>
                                                        break;
                                                }

                                            }
                                        </li>
                                    }
                                    @Html.Raw("<strong>Record Ohms of Resistance for each pair of cables:</strong><br><br>")
                                    @{
                                        for (int i = 1; i <= 4; i++)
                                        {
                                            if (i == 1 || i == 3)
                                            {
                                                @:<div class="container1">
                                                }

                                                <div class="section1">

                                                    @*    <input class="wpcf7-form-control wpcf7-text form-control" name="Ohms1" value="" placeholder="Pair 1 Ohms" aria-invalid="false" type="text">*@
                                                    @*@Html.TextBoxFor(m => m.Survey.pair1_ohms, new { @placeholder = "Pair 1 Ohms", @maxlength = "10", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" })*@
                                                    @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                                                                                                                                            { "QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                            { "ClassName", "Survey" },
                                                                                                                                                                                                                                            { "PropertyName", "pair"+i+"_ohms" },
                                                                                                                                                                                                                                            { "Attributes", new { @placeholder = "Pair " + i+ " Ohms", @maxlength = "10", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                                                                                                                                                            { "divClass", "form-group Ohms"+i },
                                                                                                                                                                                                                                            { "ShowLabel", true }
                                                                                                                                                                                                                                            }); }
                                                </div>

                                                if (i == 2 || i == 4)
                                                {
                                                @:</div>
                                            }
                                        }
                                    }
                                    <strong>7 Ohms or less supports optimum performance of the ACS-1E/MMR 485 Communication Bus</strong>

                                    <li>Between 7 and 9 Ohms will show a slight degradation in the Contactless EMV/NFC reading of Contactless EMV Cards and NFC Enabled Mobile Phones.</li>
                                    <li>The Card Reader Cable Resistance should never go above 9 Ohms.If it does, sections of the Card Reader Cable may need to be moved away from devices radiating EMF or there may be splices within the Card Reader cable.  If the Card Reader Cable cannot be relocated, the new Card Reader cable should be installed.</li>


                                    Note: Even though a resistance check of an existing card reader cable or even a recently installed card reader cable may be measured to acceptable resistance levels, equipment that turns on and off intermittently at time before or after the resistance testing may create EMF on the 485 Bus Card Reader Cable.  If these devices (HVAC, Fans, Pumps, Light Fixtures, etc.) are not on during your testing, you may have a false positive result.


                                    The cable that you’d tested to be within acceptable resistance levels may still need to be replaced, if during your testing these devices were not operating.
                                    <br>&nbsp;
                                    <li>

                                        @*<select class="wpcf7-form-control wpcf7-select form-control" name="Card-Reader-Cable" aria-invalid="false"><option value="" selected="">---</option><option value="Previous Card Access System install">Previous Card Access System install</option><option value="the typical ACS-1E 6 conductor 22 Ga.">the typical ACS-1E 6 conductor 22 Ga.</option><option value="18 Ga. Stranded Cable in a Plenum Jacket">18 Ga. Stranded Cable in a Plenum Jacket</option></select>*@

                                        @{ var CableOrigins = Utilities.GetCableOrigins();
                                            if (!ViewBag.QueryMode)
                                            {
                                                @Html.Raw("Advise where Card Reader Cable is from:" + @is_required)
                                                @:<div class="form-group Card-Reader-Cable">
                                                    @Html.DropDownListFor(m => m.Survey.cable_origin, new SelectList(CableOrigins, "Value", "Text", Model.Survey?.cable_origin), "--", new
                                                    {
                                                        @aria_invalid = "false",
                                                        @aria_required = "true",
                                                        @required = "",
                                                        @class = "wpcf7-form-control wpcf7-select wpcf7-validates-as-required  form-control ",
                                                        @onchange = "GetCableOriginName(this)"
                                                       })
                                                    @Html.HiddenFor(m => m.Survey._CableOriginFullName)
                                                }
                                                else
                                                {
                                                    @Html.Raw("Card Reader Cable is from:")
                                                    @:<div class="form-group Card-Reader-Cable">
                                                        @*@Html.Label("Survey_cable_origin", Model.Survey.cable_origin, new { @style = "font-weight:normal" })*@
                                                        @Html.LabelFor(m => m.Survey._CableOriginFullName, Model.Survey.cable_origin == null ? "" : CableOrigins[Int32.Parse(Model.Survey.cable_origin)].Text, new { @style = "font-weight:bold" });
                                                    }
                                                @:</div>
                                        }

                                </li>
                                <li>
                                    What is the Gauge of the current Card Reader Cable?

                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                        { "ClassName", "Survey" },
                                                                                                                                                                                                        { "PropertyName", "cable_gauge" },
                                                                                                                                                                                                        { "FirstValue", "22 Ga." },
                                                                                                                                                                                                        { "SecondValue", "18 Ga." }
                                                                                                                                                                                                    });}

                                    <div class="form-group Card-Reader-Cable-Other">
                                        @*<input class="wpcf7-form-control wpcf7-text form-control" name="Card-Reader-Cable-Other" value="" placeholder="other" aria-invalid="false" type="text">*@
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                                                                                                                    { "QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                    { "ClassName", "Survey" },
                                                                                                                                                                                                                    { "PropertyName", "cable_gauge_other" },
                                                                                                                                                                                                                    { "Attributes", new { @placeholder = "other", @maxlength = "20", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                                                                                                                                    { "divClass", "form-group Card-Reader-Cable-Other" },
                                                                                                                                                                                                                    { "ShowLabel", true }
                                                                                                                                                                                                                    }); }
                                    </div>
                                </li>
                                @if (!ViewBag.QueryMode)
                                {
                                    @:<li>For optimum MMR Card Reader performance use 22/6 up to 150ft.and 18/6 for 150-250 ft.  </li>
                                }
                                <li>
                                    Does the Cable have Twisted Pairs?
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Twisted-Pair"><div class="radio"><label><input name="Twisted-Pair" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="Twisted-Pair" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                                                                                                  { "ClassName", "Survey" },
                                                                                                                                                                                                                                                                                                                                  { "PropertyName", "has_twisted_pairs" },
                                                                                                                                                                                                                                                                                                                              }); }
                                </li>

                                If the preexisting Card Reader Cable is twisted pair, make sure that each twisted pair is isolated/connected to either power/ground or the 485 Data Bus.Do not use one wire of a twisted pair for power or ground and the other wire from the same twisted pair for one of the 485 Bus wires.
                                <br>&nbsp;
                                <li>
                                    Did/Does Card Reader Cable need to be replaced?
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Replace-Card-Reader"><div class="radio"><label><input name="Replace-Card-Reader" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="Replace-Card-Reader" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                                                                                                  { "ClassName", "Survey" },
                                                                                                                                                                                                                                                                                                                                  { "PropertyName", "replacement_needed" },
                                                                                                                                                                                                                                                                                                                              }); }
                                </li>

                                <li>
                                    Did you install a new Card Reader Cable?
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Card-Reader-Installed"><div class="radio"><label><input name="Card-Reader-Installed" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="Card-Reader-Installed" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                { "PropertyName", "new_cable_installed" },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }); }
                                </li>
                                @if (!ViewBag.QueryMode)
                                {
                                    @:<li>If a return visit is required to replace the cable, circle and/or note the following requirements:</li>
                                }
                                else
                                {
                                    @:<li>If a return visit is required to replace the cable, the following are required:</li>
                                }

                                <div class="form-group wpcf7-form-control wpcf7-checkbox return-visit">
                                    @*<input name="return-visit[]" value="2nd and/or 3rd Laborer required for new Card Reader Cable install" aria-invalid="false" type="checkbox">2nd and/or 3rd Laborer required for new Card Reader Cable install*@
                                    @{string value;
                                    }
                                    @if (!ViewBag.QueryMode || Model.Survey._visit_reqs[0])
                                    {
                                        <div class="checkbox">
                                            @{value = "2nd and/or 3rd Laborer required for new Card Reader Cable install"; }
                                            @{ if (!ViewBag.QueryMode)
                                                {
                                                    <label>
                                                        @Html.CheckBoxFor(m => m.Survey._visit_reqs[0], new { @aria_invalid = "false" })
                                                        @value
                                                    </label>
                                                }
                                                else
                                                {
                                                    <label style="font-weight:bold">
                                                        @value
                                                    </label>
                                                }
                                            }
                                        </div>
                                    }
                                    @if (!ViewBag.QueryMode || Model.Survey._visit_reqs[1])
                                    {
                                        <div class="checkbox">
                                            @{value = "Extension or tall A frame Ladders"; }
                                            @{ if (!ViewBag.QueryMode)
                                                {
                                                    <label>
                                                        @Html.CheckBoxFor(m => m.Survey._visit_reqs[1], new { @aria_invalid = "false" })
                                                        @value
                                                    </label>
                                                }
                                                else
                                                {
                                                    <label style="font-weight:bold">
                                                        @value
                                                    </label>
                                                }
                                            }
                                        </div>
                                    }
                                    @if (!ViewBag.QueryMode || Model.Survey._visit_reqs[2])
                                    {
                                        <div class="checkbox">
                                            @{value = "Cherry Picker/Scaffolding"; }
                                            @{ if (!ViewBag.QueryMode)
                                                {
                                                    <label>
                                                        @Html.CheckBoxFor(m => m.Survey._visit_reqs[2], new { @aria_invalid = "false" })
                                                        @value
                                                    </label>
                                                }
                                                else
                                                {
                                                    <label style="font-weight:bold">
                                                        @value
                                                    </label>
                                                }
                                            }
                                        </div>
                                    }
                                    @if (!ViewBag.QueryMode || Model.Survey._visit_reqs[3])
                                    {
                                        <div class="checkbox">
                                            @{value = "Stock Conduit"; }
                                            @{ if (!ViewBag.QueryMode)
                                                {
                                                    <label>
                                                        @Html.CheckBoxFor(m => m.Survey._visit_reqs[3], new { @aria_invalid = "false" })
                                                        @value
                                                    </label>
                                                }
                                                else
                                                {
                                                    <label style="font-weight:bold">
                                                        @value
                                                    </label>
                                                }
                                            }
                                        </div>
                                    }
                                    @if (!ViewBag.QueryMode || Model.Survey._visit_reqs[4])
                                    {
                                        <div class="checkbox">
                                            @{value = "Custom Conduit"; }
                                            @{ if (!ViewBag.QueryMode)
                                                {
                                                    <label>
                                                        @Html.CheckBoxFor(m => m.Survey._visit_reqs[4], new { @aria_invalid = "false" })
                                                        @value
                                                    </label>
                                                }
                                                else
                                                {
                                                    <label style="font-weight:bold">
                                                        @value
                                                    </label>
                                                }
                                            }
                                        </div>
                                    }
                                    @if (!ViewBag.QueryMode || Model.Survey._visit_reqs[5])
                                    {
                                        <div class="checkbox">
                                            @{value = "Sheetrock Repair, Spackle, Painting"; }
                                            @{ if (!ViewBag.QueryMode)
                                                {
                                                    <label>
                                                        @Html.CheckBoxFor(m => m.Survey._visit_reqs[5], new { @aria_invalid = "false" })
                                                        @value
                                                    </label>
                                                }
                                                else
                                                {
                                                    <label style="font-weight:bold">
                                                        @value
                                                    </label>
                                                }
                                            }
                                        </div>
                                    }
                                </div>
                                <strong>PICTURES OF THE CABLE RUN/WALLS/CEILING, IF A NEW CARD READER CABLE INSTALL IS REQUIRED:</strong>

                                <div class="container1">
                                    @{Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                { "PropertyName", "is_cable_picture_taken" },
                                                                                                                                { "divClass", "form-group Cable-Install-Pic" },
                                                                                                                                { "Label", "Picture Taken:"},
                                                                                                                                }); }

                                </div>


                                <div class="container1">
                                    @{Html.RenderPartial("~/Views/Shared/ImageView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                            { "ClassName", "Survey" },
                                                                                                                            { "PropertyName", "cable_picture_path" },
                                                                                                                            { "ImageIndex", 6 }
                                                                                                                            }); }
                                </div>

                                @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                        { "ClassName", "Survey" },
                                                                                                                        { "PropertyName", "unique_reqs" },
                                                                                                                        { "Attributes", new { @placeholder = "Describe any unique requirements", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                        { "divClass", "form-group Overlay_observations" },
                                                                                                                        { "ShowLabel", true },
                                                                                                                        { "TextArea", true },
                                                                                                                        }); }




                                <fieldset>
                                    <ul>
                                        <legend>Overlay Alarm</legend>

                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                { "PropertyName", "overlay_activity" },
                                                                                                                                { "Attributes", new { @placeholder = "Describe Activity", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                { "divClass", "form-group Overlay_observations" },
                                                                                                                                { "LabelForReadOnly", "Note of any observations of activity within the Video that may have contributed to the Overlay Alarm:" },
                                                                                                                                { "LabelForEdit", "Note: If a camera at the location is covering the area of the MMR, review the camera video recording from 40 minutes before the Overlay Alarm activation through 5 minutes after the Overlay Alarm activation.  Make note of any observations of activity within the Video that may have contributed to the Overlay Alarm:" },
                                                                                                                                { "ShowLabel", true },
                                                                                                                                { "TextArea", true },
                                                                                                                                }); }


                                        @{
                                            for (int i = 0; i < Model.SurveyObstructions.Count; i++)
                                            {
                                                @Html.HiddenFor(m => m.SurveyObstructions[i].id)
                                                <li>@Model.SurveyObstructions[i]._message<br>&nbsp;</li>
                                                <div>Obstructions Found?</div>
                                                //<div class="form-group wpcf7-form-control wpcf7-radio MMR-Obstructions"><div class="radio"><label><input name = "MMR-Obstructions" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name = "MMR-Obstructions" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>


                                                <div>
                                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                            { "ClassName", "SurveyObstructions" },
                                                                                                                                            { "PropertyName", "yes_no" },
                                                                                                                                            { "Index", i }
                                                                                                                                            });}
                                                </div>

                                                Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                    { "ClassName", "SurveyObstructions" },
                                                                                                                                    { "PropertyName", "description" },
                                                                                                                                    { "Attributes", new { @placeholder = "Describe Obstructions", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                    { "divClass", "form-group MMR-Obstructions-Decribe" },
                                                                                                                                    { "ShowLabel", true },
                                                                                                                                    { "TextArea", true },
                                                                                                                                    { "Index", i },
                                                                                                                                    });
                                                <div class="container1">
                                                    @{Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                            { "ClassName", "SurveyObstructions" },
                                                                                                                                            { "PropertyName", "is_picture_taken" },
                                                                                                                                            { "divClass", "form-group MMR-Obstructions-Pic" },
                                                                                                                                            { "Label", "Picture Taken:"},
                                                                                                                                            { "Index", i },
                                                                                                                                        }); }
                                                </div>
                                                <div class="container1">
                                                    @*@Html.TextBoxFor(m => Model.ImagePathsMap[69 - 1])*@
                                                    @{Html.RenderPartial("~/Views/Shared/ImageView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                            { "ClassName", "SurveyObstructions" },
                                                                                                                                            { "PropertyName", "picture_path" },
                                                                                                                                            { "Index", i },
                                                                                                                                            { "ImageIndex", 70+i }
                                                                                                                                            }); }
                                                </div>

                                            }
                                        }


                                        <li>If there are no objects/material found or reported to be over the Card Reader’s faceplate and/or Sensors, the Storefront and/or Door/Pull Handle is not interfering with the Card Readers Overlay Sensors scanning area and the Overlay Alarm is still active on the ACS=1E Panel, turn the ACS-1E panel off, wait 30 seconds then turn the ACS-1E panel on and monitor the; </li>
                                        <ul>
                                            <li>Overlay Alarm LED</li>
                                            <li>ACS-1E Event File for an Overlay Asserted Message</li>
                                            <li>Aux.Output if set active (after 30 minutes)</li>
                                        </ul>

                                        <li>If additional_findings first 30-35 minutes of the power on, and none of the above physical restrictions exist, then replace the SkimGard/MMR Card Reader.</li>
                                        Make any notes of additional findings:
                                        @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                { "ClassName", "Survey" },
                                                                                                                                { "PropertyName", "additional_findings" },
                                                                                                                                { "Attributes", new { @placeholder = "Additional Findings", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                { "divClass", "form-group Objects_Observations" },
                                                                                                                                { "TextArea", true } });}


                                        <div class="container1">
                                            <div class="section1">
                                                @*    <input class="wpcf7-form-control wpcf7-text form-control" name="Overlay-Objects-SN1" value="" placeholder="New MMR Reader #1 Serial #" aria-invalid="false" type="text">*@
                                                @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                                { "QueryMode", ViewBag.QueryMode },
                                                                                                                { "ClassName", "Survey" },
                                                                                                                { "PropertyName", "new_serial_reader1" },
                                                                                                                { "Attributes", new { @placeholder = "New MMR Reader #1 Serial #", @maxlength = "6", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                                { "divClass", "form-group Overlay-Objects-SN1" },
                                                                                                                { "LabelForEdit", "Other" },
                                                                                                                { "ShowLabel", true }
                                                                                                                }); }
                                            </div>
                                            <div class="section1">
                                                @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary {
                                                                                                            { "QueryMode", ViewBag.QueryMode },
                                                                                                            { "ClassName", "Survey" },
                                                                                                            { "PropertyName", "new_serial_reader2" },
                                                                                                            { "Attributes", new { @placeholder = "New MMR Reader #2 Serial #", @maxlength = "6", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-validates-as-required form-control" }},
                                                                                                            { "divClass", "form-group Overlay-Objects-SN2" },
                                                                                                            { "LabelForEdit", "Other" },
                                                                                                            { "ShowLabel", true }
                                                                                                            }); }
                                            </div>
                                        </div>
                                    </ul>
                                </fieldset>

                                <fieldset>
                                <fieldset>
                                    <legend>Tamper Alarms</legend>

                                    @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                          { "ClassName", "Survey" },
                                                                                                                                                                                          { "PropertyName", "tamper_observations" },
                                                                                                                                                                                          { "Attributes", new { @placeholder = "Describe Observations", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                                                                          { "divClass", "form-group Objects_Observations" },
                                                                                                                                                                                          { "LabelForReadOnly", "Note of any observations of activity within the Video that may have contributed to the Overlay Alarm:" },
                                                                                                                                                                                          { "LabelForEdit", "Note: If a camera at the location is covering the area of the MMR, review the camera video recording from 40 minutes before the Overlay Alarm activation through 5 minutes after the Overlay Alarm activation.  Make note of any observations of activity within the Video that may have contributed to the Overlay Alarm:" },
                                                                                                                                                                                          { "ShowLabel", true },
                                                                                                                                                                                          { "TextArea", true } });}

                                    @if (!ViewBag.QueryMode)
                                    {
                                        <li>The MMR supports two(2) Tampers, one is the physical Tamper switch within the collar, and the 2nd is an accelerometer embedded within the MMR Reader.The accelerometer is a secondary fail-safe tamper in the event someone tries to bypass or forgets to attach the mechanical Tamper switch.</li>

                                        <ul>
                                            In order to properly test both Tamper features of the MMR, follow the steps below to remove and secure the MMR to support a simultaneous test of both Tamper features:

                                            <li>Some collars(1/4”, ½” 2” and 3” collars) support remounting the MMR to a single screw of the collar where the MMR reader is mounted off to the side of the collar.Collars that do not support the above temporary remount of the MMR reader will need following the next outlined procedure. </li>

                                            <li>Remove the MMR and flip the MMR 180 degrees, re-secure the face of the non LED end of the MMR with just one of the mounting screws of the Tamper collar. Very carefully tighten the one screw to allow the MMR Reader to remain stationary. You will need to loosen this screw to tilt/pivot the MMR as needed for the accelerometer test and carefully retighten.</li>
                                        </ul>

                                        <li>Separate the two white MMR wires B-nutted to the Collar’s Tamper Switch wires.  Then re-twist and tape the two white MMR cables together that were previously connected to the Tamper Switch.If the Tamper alarm LED on the ACS-1E panel turns off then continue with the following steps</li>
                                    }
                                    <li>With a Multi-Meter, test the continuity of the Tamper switch wires within the collar (carefully depress down onto the silver tab of the Tamper switch, continuity should show a close/off when the silver tab is depressed and an open/on when you let go of the silver tab on the Tamper switch).<br>&nbsp;</li>
                                    Continuity Tests OK:
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Continuity-Test"><div class="radio"><label><input name="Continuity-Test" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="Continuity-Test" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                                                            { "ClassName", "Survey" },
                                                                                                                                                                                                                                                                                            { "PropertyName", "continuity_test_ok" }
                                                                                                                                                                                                                                                                                            });}

                                    Changed Switch:
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Continuity-Test-Switch"><div class="radio"><label><input name="Continuity-Test-Switch" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="Continuity-Test-Switch" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                                                            { "ClassName", "Survey" },
                                                                                                                                                                                                                                                                                            { "PropertyName", "changed_switch1" }
                                                                                                                                                                                                                                                                                            });}

                                    <li>Inspect the Tamper Switch wires(two white wires within the collar) for damage and then inspect the Tamper switch wire contacts for a broken/cold solder joint.<br>&nbsp;</li>

                                    Cables/Solder Joint Show Damage:
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Cable-Solder"><div class="radio"><label><input name="Cable-Solder" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="Cable-Solder" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        { "ClassName", "Survey" },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        { "PropertyName", "joint_show_damage" }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        });}

                                    Changed Switch:
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        { "ClassName", "Survey" },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        { "PropertyName", "changed_switch2" }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        });}

                                    <li>If the Tamper alarm LED turns off by shorting the MMR white wires and you’ve verified the Tamper switch and Tamper Circuit within the MMR are working correctly, begin to test the accelerometer within the MMR Reader.</li>

                                    <li>Loosen the one screw holding the MMR outside the collar and Tilt/Pivot/Move the MMR greater than 5 degrees and very carefully retighten the screw.Return(within 20 seconds) to the ACS-1E Panel and check the status of the Tamper LED on the ACS-1E Panel and/or 2nd Card Reader PCB.If the Tamper LED is illuminated the accelerometer is functioning correctly.  If the Tamper LED is not illuminated, the accelerometer is not functioning correctly.If the ACS-1E Panel is far away (&gt; 20 seconds from you tilting the MMR) from the MMR Reader you can verify the Accelerometer Tamper signal by viewing the ACS-1E Event Panel Messages. <br>&nbsp;</li>

                                    Replaced MMR Reader:
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Replaced-MMR"><div class="radio"><label><input name="Replaced-MMR" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label>
            </div><div class="radio"><label><input name="Replaced-MMR" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div>
            </div>*@

                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                              { "ClassName", "Survey" },
                                                                                                                                                                                              { "PropertyName", "replaced_mmr_reader" }
                                                                                                                                                                                              });}

                                    <li>Reinstall the MMR Reader to check if the MMR Reader is actuating the Tamper switch. If the Tamper Alarm LED remains on, the Tamper switch is not engaged with the installed MMR Reader, replace the collar. <br>&nbsp;</li>
                                    Replaced Collar:
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Replaced-Collar"><div class="radio"><label><input name="Replaced-Collar" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="Replaced-Collar" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                              { "ClassName", "Survey" },
                                                                                                                                                                                              { "PropertyName", "replaced_collar" }
                                                                                                                                                                                              });}
                                    <li>Thoroughly inspect the MMR Card Reader module for any material within the card slot, possible intrusion or modification.<br>&nbsp;</li>
                                    @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                              { "ClassName", "Survey" },
                                                                                                                                                                                              { "PropertyName", "inspection_results" },
                                                                                                                                                                                              { "Attributes", new { @placeholder = "Describe Observations", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                                                                              { "divClass", "form-group Inspection-Results-Describe" },
                                                                                                                                                                                              //{ "LabelForReadOnly", "Note of any observations of activity within the Video that may have contributed to the Overlay Alarm:" },
                                                                                                                                                                                              { "LabelForEdit", "Inspection Results: (Describe)" },
                                                                                                                                                                                              { "ShowLabel", true },
                                                                                                                                                                                              { "TextArea", true } });}

                                    <div class="container1">
                                        @{Html.RenderPartial("~/Views/Shared/YesNoDropDown.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                      { "ClassName", "Survey" },
                                                                                                                                                                                                      { "PropertyName", "inspection_picture_taken" },
                                                                                                                                                                                                      { "divClass", "form-group MMR-Obstructions-Pic" },
                                                                                                                                                                                                      { "Label", "Picture Taken:"+@is_required},
                                                                                                                                                                                                      }); }
                                    </div>
                                    <div class="container1">
                                        @{Html.RenderPartial("~/Views/Shared/ImageView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                                  { "ClassName", "Survey" },
                                                                                                                                                                                                  { "PropertyName", "inspection_picture_path" },
                                                                                                                                                                                                  { "ImageIndex", 8 }
                                                                                                                                                                                                  }); }
                                    </div>

                                    Check MMR Card Reader Digital Serial # matching:  Did you find the ACS-1E Card Reader Serial # “Learn Jumper” shunted?
                                    @*<div class="form-group wpcf7-form-control wpcf7-radio Lead-Jumper-Shunted"><div class="radio"><label><input name="Lead-Jumper-Shunted" value="Yes" aria-invalid="false" aria-required="true" required="" type="radio">Yes</label></div><div class="radio"><label><input name="Lead-Jumper-Shunted" value="No" aria-invalid="false" aria-required="true" required="" type="radio">No</label></div></div>*@
                                    @{Html.RenderPartial("~/Views/Shared/YesNoRadio.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                          { "ClassName", "Survey" },
                                                                                                                                                                                          { "PropertyName", "replaced_mmr_reader" }
                                                                                                                                                                                          });}
                                    @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                          { "ClassName", "Survey" },
                                                                                                                                                                                          { "PropertyName", "branch_staff_name" },
                                                                                                                                                                                          { "Attributes", new { @placeholder = "Describe Obstructions", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                                                                          { "divClass", "form-group Lead-Jumper-Shunted-Describe" },
                                                                                                                                                                                          { "LabelForReadOnly", "Results:" },
                                                                                                                                                                                          { "LabelForEdit", "Results: (Describe)" },
                                                                                                                                                                                          { "ShowLabel", true },
                                                                                                                                                                                          { "TextArea", true } });}


                                    @if (!ViewBag.QueryMode)
                                    {
                                        @Html.Raw("If at any point you need extra help please call Parabit Tech Support and have your Teamviewer setup and ready for remote assistance by Parabit’s Engineering Dept. At the end of your service call please ask the Branch Manager if they or any of their staff would like to be trained on the usage of the MMR Reader.Please record the Names below of any Branch personnel trained on the MMR Reader usage:<br><br>&nbsp;")
                                    }

                                    @{Html.RenderPartial("~/Views/Shared/TextBoxView.cshtml", Model, new ViewDataDictionary { {"QueryMode", ViewBag.QueryMode },
                                                                                                                                                                                          { "ClassName", "Survey" },
                                                                                                                                                                                          { "PropertyName", "branch_staff_name" },
                                                                                                                                                                                          { "Attributes", new { @placeholder = "Provide Names", @maxlength = "255", @rows = "4", @aria_invalid = "false", @class = "wpcf7-form-control wpcf7-textarea form-control" }},
                                                                                                                                                                                          { "divClass", "form-group Branch-Staff-Trained" },
                                                                                                                                                                                          { "LabelForReadOnly", "Name of Branch Staff Trained:" },
                                                                                                                                                                                          { "LabelForEdit", "Name of Branch Staff Trained" },
                                                                                                                                                                                          { "ShowLabel", true },
                                                                                                                                                                                          { "TextArea", true } });}


                                </fieldset>
                                @if (!ViewBag.QueryMode)
                                {
                                    @:<div>
                                    }
                                    else
                                    {
                                        @:<div style="display:none">
                                        }
                                Pressing SEND will upload all images.
                                <br>
                                This can take some time. Do not close this window or press SEND again.

                                <br>
                                A thank you message will be displayed on completion.
                                <br>
                                &nbsp;



                                <div class="form-group"><div><input class="wpcf7-form-control wpcf7-submit btn btn-primary" value="Send" type="submit" id="btnSend"></div></div>
                                <div class="wpcf7-response-output wpcf7-display-none alert"></div>
                            </div>
                            </ul>
                            </form>
            </div>
                    </article>

                </div><!-- /#content -->
            </div>

            <div class="col-xs-6 col-sm-4" id="sidebar" role="navigation">
                <aside class="sidebar"></aside>
            </div>

        </div><!-- /.row -->
    </div>

    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
    <script type="text/javascript">
        $("#formSurvey").validate({});

        $("input[name^='upload-file-']").each(function () {
            LoadImageOnForm(this);
        });

        $("input[name$='serial_no']").each(function () {
            $(this).rules('add', {
                maxlength: 6
            });
        });
        $("input[name$='ZipCode']").each(function () {
            $(this).rules('add', {
                number: true
            });
        });
        $("input[name$='ohms']").each(function () {
            $(this).rules('add', {
                number: true
            });
        });

        function LoadImageOnForm(e) {
            var index = $("#" + e.id).attr("index");
            var fileName
            var tagPath = "[tag=image-path-" + index + "]";  //"[id$=" + index + "__image_path]"
            
            if (e.files.length == 0) {
                fileName = $(tagPath).val();
                if (fileName != '' && fileName != null) {
                    $("#image-" + index).attr("src", fileName);
                    $("#image-" + index)
	                    .load(function () {
	                        $("#" + e.id).removeAttr("aria-required");
	                        $("#" + e.id).removeAttr("required");
	                    })
	                    .error(function () {
	                        $("#image-" + index).attr("src", "..");
	                    });
                    
                }
                return;
            }

            fileName = e.files[0].name;
            var guid='@Guid.NewGuid().ToString()';
            fileName = "/images/" +guid+ "!" + fileName;
            if ($(tagPath).length > 0)
                $(tagPath).val(fileName);

            var reader = new FileReader();
            reader.onload = function (e) {
                $("#image-" + index).attr("src", e.target.result);
            }
            reader.readAsDataURL(e.files[0]);

        }

    </script>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @*<script src="@Url.Content("~/Scripts/tracs-common.js")" type="text/javascript"></script>*@
